app-id: io.github.benjamimgois.omnicom
runtime: org.kde.Platform
runtime-version: '6.10'
sdk: org.kde.Sdk
base: com.riverbankcomputing.PyQt.BaseApp
base-version: '6.10'
command: omnicom

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=all

cleanup-commands:
  - /app/cleanup-BaseApp.sh

modules:
  - name: python3-pyte
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "pyte" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/3c/c1/d73f12f8cdb1891334a2ccf7389eed244d3941e74d80dd220badb937f3fb/wcwidth-0.5.3-py3-none-any.whl
        sha256: d584eff31cd4753e1e5ff6c12e1edfdb324c995713f75d26c29807bb84bf649e
      - type: file
        url: https://files.pythonhosted.org/packages/59/d0/bb522283b90853afbf506cd5b71c650cf708829914efd0003d615cf426cd/pyte-0.8.2-py3-none-any.whl
        sha256: 85db42a35798a5aafa96ac4d8da78b090b2c933248819157fc0e6f78876a0135

  - name: python3-paramiko
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "paramiko" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/1b/0f/c00296e36ff7b0b9c30ae9a9a0e1ca33a3a1c71da05b4c464c1b7e9c6e1f/paramiko-3.5.0-py3-none-any.whl
        sha256: 786699214858baf1cc3102f2852146366091cf1add6d72e05fe60228dae8bb52

  - name: python3-telnetlib
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "standard-telnetlib" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/d1/5e/3c6f3e3e3e3e3e3e3e3e3e3e3e3e/standard_telnetlib-3.13.0-py3-none-any.whl
        sha256: 243333696bf1659a558eb999c23add82c41ffc2f2d04a56fae13b61b536fb173

  - name: picocom
    buildsystem: simple
    build-commands:
      - make
      - install -Dm755 picocom ${FLATPAK_DEST}/bin/picocom
    sources:
      - type: archive
        url: https://github.com/npat-efault/picocom/archive/refs/tags/3.1.tar.gz
        sha256: e6761ca932ffc6d09bd6b11ff018bdaf70b287ce518b3282d29e0270e88420bb
        x-checker-data:
          type: anitya
          project-id: 11061
          url-template: https://github.com/npat-efault/picocom/archive/refs/tags/$version.tar.gz

  - name: omnicom
    buildsystem: simple
    build-commands:
      - install -Dm755 omnicom ${FLATPAK_DEST}/bin/omnicom
      - install -Dm644 assets/omnicom.png ${FLATPAK_DEST}/share/icons/hicolor/512x512/apps/${FLATPAK_ID}.png
      - install -Dm644 assets/icons/omnicom-256.png ${FLATPAK_DEST}/share/icons/hicolor/256x256/apps/${FLATPAK_ID}.png
      - install -Dm644 assets/icons/omnicom-128.png ${FLATPAK_DEST}/share/icons/hicolor/128x128/apps/${FLATPAK_ID}.png
      - install -Dm644 assets/icons/omnicom-64.png ${FLATPAK_DEST}/share/icons/hicolor/64x64/apps/${FLATPAK_ID}.png
      - install -Dm644 assets/icons/omnicom-48.png ${FLATPAK_DEST}/share/icons/hicolor/48x48/apps/${FLATPAK_ID}.png
      - install -Dm644 assets/icons/omnicom-32.png ${FLATPAK_DEST}/share/icons/hicolor/32x32/apps/${FLATPAK_ID}.png
      - install -Dm644 assets/arrow_down.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/arrow_down.svg
      - install -Dm644 assets/vendors/generic.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/generic.svg
      - install -Dm644 assets/vendors/cisco.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/cisco.svg
      - install -Dm644 assets/vendors/huawei.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/huawei.svg
      - install -Dm644 assets/vendors/juniper.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/juniper.svg
      - install -Dm644 assets/vendors/fortinet.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/fortinet.svg
      - install -Dm644 assets/vendors/dlink.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/dlink.svg
      - install -Dm644 assets/vendors/h3c.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/h3c.svg
      - install -Dm644 assets/vendors/brocade.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/brocade.svg
      - install -Dm644 assets/vendors/datacom.svg ${FLATPAK_DEST}/share/${FLATPAK_ID}/vendors/datacom.svg
      - install -Dm644 packaging/flatpak/${FLATPAK_ID}.desktop ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop
      - install -Dm644 packaging/flatpak/${FLATPAK_ID}.metainfo.xml ${FLATPAK_DEST}/share/metainfo/${FLATPAK_ID}.metainfo.xml
      - install -Dm644 LICENSE ${FLATPAK_DEST}/share/licenses/${FLATPAK_ID}/LICENSE
    sources:
      - type: dir
        path: ../..
