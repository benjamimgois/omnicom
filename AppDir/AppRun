#!/bin/bash
# AppRun script for SerialCom AppImage

# Get the directory where the AppImage is mounted
HERE="$(dirname "$(readlink -f "${0}")")"

# Export APPDIR for the application to find resources
export APPDIR="${HERE}"

# Use system Python3
PYTHON_BIN="python3"

# Check if Python3 is available
if ! command -v ${PYTHON_BIN} &> /dev/null; then
    echo "Error: Python 3 is required but not found"
    echo "Please install Python 3 on your system"
    exit 1
fi

# Check if PyQt6 is available
if ! ${PYTHON_BIN} -c "import PyQt6" 2>/dev/null; then
    echo "Error: PyQt6 is required but not found"
    echo "Please install python3-pyqt6 on your system"
    exit 1
fi

# Execute the application
exec ${PYTHON_BIN} "${HERE}/usr/bin/serialcom" "$@"
